lending_library.withdraw_form:
  path: '/library-item/{node}/withdraw'
  defaults:
    _title: 'Withdraw Item'
    _controller: '\Drupal\lending_library\Controller\LibraryTransactionController::actionForm'
    action_type: 'withdraw'
  requirements:
    _permission: 'create library_transaction entities' 
    node: \d+
  options:
    parameters:
      node:
        type: entity:node

lending_library.return_form:
  path: '/library-item/{node}/return'
  defaults:
    _title: 'Return Item'
    _controller: '\Drupal\lending_library\Controller\LibraryTransactionController::actionForm'
    action_type: 'return'
  requirements:
    _permission: 'create library_transaction entities' 
    node: \d+
  options:
    parameters:
      node:
        type: entity:node

lending_library.renew:
  path: '/library-item/{node}/renew'
  defaults:
    _title: 'Renew Item'
    _controller: '\Drupal\lending_library\Controller\LibraryTransactionController::renew'
  requirements:
    _permission: 'create library_transaction entities'
    node: \d+
  options:
    parameters:
      node:
        type: entity:node

lending_library.issue_form:
  path: '/library-item/{node}/report-issue'
  defaults:
    _title: 'Report Issue'
    _controller: '\Drupal\lending_library\Controller\LibraryTransactionController::actionForm'
    action_type: 'issue'
  requirements:
    _permission: 'create library_transaction entities'
    node: \d+
  options:
    parameters:
      node:
        type: entity:node

lending_library.settings:
  path: '/admin/config/makehaven/lending-library'
  defaults:
    _form: '\Drupal\lending_library\Form\LendingLibrarySettingsForm'
    _title: 'Lending Library settings'
  requirements:
    _permission: 'administer lending library configuration'

lending_library.test_form:
  path: '/admin/config/makehaven/lending-library/test'
  defaults:
    _form: '\Drupal\lending_library\Form\LendingLibraryTestTriggerForm'
    _title: 'Test Triggers'
  requirements:
    _permission: 'administer site configuration'

lending_library.waitlist_add:
  path: '/library/item/{node}/waitlist/add'
  defaults:
    _controller: '\Drupal\lending_library\Controller\WaitlistController::add'
    _title: 'Get in Line'
  requirements:
    _permission: 'get in line for library items'
    node: \d+

lending_library.waitlist_remove:
  path: '/library/item/{node}/waitlist/remove'
  defaults:
    _controller: '\Drupal\lending_library\Controller\WaitlistController::remove'
    _title: 'Leave Waitlist'
  requirements:
    _permission: 'get in line for library items'
    node: \d+


lending_library.battery_return:
  path: '/library/battery/{battery}/return'
  defaults:
    _controller: '\Drupal\lending_library\Controller\BatteryReturnController::return'
    _title: 'Return Battery'
  requirements:
    _permission: 'create library_transaction entities'
    battery: '\d+'

lending_library.paypal_ipn_listener:
  path: '/lending-library/paypal-ipn-listener'
  defaults:
    _controller: '\Drupal\lending_library\Controller\PaypalIpnController::ipnListener'
    _title: 'PayPal IPN Listener'
  methods: [POST]
  requirements:
    _access: 'TRUE'

lending_library.damage_charge_confirm:
  path: '/library-transaction/{library_transaction}/confirm-damage-charge'
  defaults:
    _form: '\Drupal\lending_library\Form\DamageChargeConfirmForm'
    _title: 'Confirm Damage Charge'
  requirements:
    _permission: 'administer library_transaction entities'
    library_transaction: \d+
  options:
    parameters:
      library_transaction:
        type: entity:library_transaction
